import{j as R,r as i,f as p,e as v,v as x,n as E,R as b}from"./vendor.6f8deea5.js";const k=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}};k();const d=R.exports.jsx,h=R.exports.jsxs,S=R.exports.Fragment,m="dekadeka:banner-text",N=()=>{const[a,l]=i.exports.useState(!1),[s,r]=i.exports.useState(!1),[e,t]=i.exports.useState(null),n=i.exports.useRef(null);i.exports.useEffect(()=>{p.addEventListener("fullscreenchange",()=>{r(!!p.fullscreenElement)})},[]),i.exports.useEffect(()=>(t(v(n.current)),()=>{e&&e.unsubscribe()}),[]),i.exports.useEffect(()=>{try{const g=localStorage.getItem(m);g&&n.current&&(n.current.textContent=g)}catch{}},[]);const c=i.exports.useCallback(()=>{p.exitFullscreen()},[]),f=i.exports.useCallback(()=>{document.body.focus(),s||p.requestFullscreen(document.body)},[]),o=i.exports.useCallback(()=>{n.current&&localStorage.setItem(m,w(n.current))},[]),u=i.exports.useCallback(()=>{l(!0)},[]),y=i.exports.useCallback(()=>{setTimeout(()=>{l(!1)},100)},[]);return h(S,{children:[a&&h("div",{className:"control",children:[s&&p.fullscreenEnabled&&d("button",{onClick:c,children:"Exit fullsreen"}),d("button",{onClick:f,children:"View"})]}),d("div",{className:"banner",children:d("div",{ref:n,contentEditable:!0,onKeyUp:o,onFocus:u,onBlur:y,children:"Hello, world!"})})]})};function w(a){const[,l]=s(a);return l;function s(r){if(r.nodeType===Node.TEXT_NODE)return[!1,r.textContent];let e="";for(let t=0;t<r.childNodes.length;t++){const[n,c]=s(r.childNodes[t]);e+=`${t>0&&n?`
`:""}${c}`}return[r.nodeName.toLowerCase()==="div",e]}}function O(a={}){const{immediate:l=!1,onNeedRefresh:s,onOfflineReady:r,onRegistered:e,onRegisterError:t}=a;let n,c;const f=async(o=!0)=>{o&&(n==null||n.addEventListener("controlling",u=>{u.isUpdate&&window.location.reload()})),c&&c.waiting&&await E(c.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){n=new x("/dekadeka/sw.js",{scope:"/dekadeka/"}),n.addEventListener("activated",o=>{o.isUpdate||r==null||r()});{const o=()=>{s==null||s()};n.addEventListener("waiting",o),n.addEventListener("externalwaiting",o)}n.register({immediate:l}).then(o=>{c=o,e==null||e(o)}).catch(o=>{t==null||t(o)})}return f}function C(a={}){const{immediate:l=!0,onNeedRefresh:s,onOfflineReady:r,onRegistered:e,onRegisterError:t}=a,[n,c]=i.exports.useState(!1),[f,o]=i.exports.useState(!1),u=O({immediate:l,onOfflineReady(){o(!0),r==null||r()},onNeedRefresh(){c(!0),s==null||s()},onRegistered:e,onRegisterError:t});return{needRefresh:[n,c],offlineReady:[f,o],updateServiceWorker:u}}const L=()=>{const{offlineReady:[a,l],needRefresh:[s,r],updateServiceWorker:e}=C({onRegistered(t){console.log("SW Registered: "+t)},onRegisterError(t){console.log("SW registration error",t)},onNeedRefresh(){confirm("Newer version is available. Refresh to update?")&&e(!0)},onOfflineReady(){console.log("offline ready")}});return d(N,{})};b.render(d(L,{}),document.getElementById("main"));
